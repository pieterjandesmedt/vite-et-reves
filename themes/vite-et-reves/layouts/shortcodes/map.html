</div>
<div class="column is-12">
	<div id='map' style='width: 100%; height: 90vh;'></div>

	<link href='https://api.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.css' rel='stylesheet' />
	<script src='https://api.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.js'></script>
	<script>
		mapboxgl.accessToken = 'pk.eyJ1IjoicGpkcyIsImEiOiJVNEdDc3RjIn0.kmBUhtCdHZI_21ySyX56CQ';
		var map = new mapboxgl.Map({
			container: 'map',
			style: 'mapbox://styles/mapbox/light-v10'
		});

		var getJSON = function (url, callback) {
			var xhr = new XMLHttpRequest();
			xhr.open('GET', url, true);
			xhr.responseType = 'json';
			xhr.onload = function () {
				var status = xhr.status;
				if (status === 200) {
					callback(null, xhr.response);
				} else {
					callback(status, xhr.response);
				}
			};
			xhr.send();
		};

		map.on('load', function () {

			getJSON('/route/simplified.json',
				function (err, data) {
					if (err !== null) {
						alert('Something went wrong: ' + err);
					} else {
						map.addLayer({
							"id": "route",
							"type": "line",
							"source": {
								"type": "geojson",
								"data": data,
							},
							"layout": {
								"line-join": "round",
								"line-cap": "round"
							},
							"paint": {
								"line-color": "#67adb7",
								"line-width": 6
							}
						});
						// Geographic coordinates of the LineString
						var coordinates = data.features.map(feature => feature.geometry.coordinates).reduce((p,c) => p.concat(c), []);

						// Pass the first coordinates in the LineString to `lngLatBounds` &
						// wrap each coordinate pair in `extend` to include them in the bounds
						// result. A variation of this technique could be applied to zooming
						// to the bounds of multiple Points or Polygon geomteries - it just
						// requires wrapping all the coordinates with the extend method.
						var bounds = coordinates.reduce(function (bounds, coord) {
							return bounds.extend(coord);
						}, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));

						map.fitBounds(bounds, {
							padding: 50
						});
					}
				});
		});

	</script>


</div>
<div class="column is-8 is-offset-2">
